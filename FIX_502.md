# 502 Bad Gateway 오류 해결

## 즉시 해결 방법

### 1. 서버 빌드 및 재시작

```bash
# 서버 디렉토리로 이동
cd server

# TypeScript 빌드
npm run build

# 빌드 오류 확인
# 오류가 있다면 수정 후 다시 빌드

# PM2로 서버 재시작
pm2 restart server

# 또는 PM2가 없다면
pm2 delete server
pm2 start npm --name "server" -- start
```

### 2. 서버 로그 확인

```bash
# 서버 로그 확인 (최근 50줄)
pm2 logs server --lines 50

# 실시간 로그 확인
pm2 logs server
```

### 3. 서버 프로세스 확인

```bash
# PM2 프로세스 목록
pm2 list

# 서버 상태 확인
pm2 show server

# 포트 5000 리스닝 확인
sudo ss -tlnp | grep 5000
```

### 4. Nginx 재시작 (필요시)

```bash
# Nginx 설정 테스트
sudo nginx -t

# Nginx 재시작
sudo systemctl restart nginx

# Nginx 상태 확인
sudo systemctl status nginx
```

### 5. 수동 서버 시작 (PM2 문제 시)

```bash
cd server
npm start
```

## 일반적인 원인

1. **서버가 실행되지 않음**: PM2 프로세스가 중지됨
2. **빌드 오류**: TypeScript 컴파일 실패
3. **포트 충돌**: 다른 프로세스가 5000 포트 사용
4. **데이터베이스 연결 오류**: MariaDB 연결 실패
5. **코드 오류**: 런타임 에러로 서버 크래시

## 디버깅 단계

1. 서버 로그 확인 → 오류 메시지 확인
2. 빌드 확인 → TypeScript 오류 수정
3. 데이터베이스 연결 확인 → MariaDB 실행 상태 확인
4. 포트 확인 → 5000 포트 사용 가능 여부 확인

